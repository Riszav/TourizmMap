<!DOCTYPE html>
<html>
<head>
    <title>Interactive Map</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        #map {
            height: 600px;
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>Interactive Map</h1>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        var map = L.map('map').setView([74.58479679498225, 42.86969106012299], 7);
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);
        
        var KGGeoJSON = {
            "type": "Feature",
            "properties": {},
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                    [72.2373637209,39.1698091888],[72.2163697812,39.1991001152],[72.1764812957,39.2665854529],[72.1019528097,39.2657727629],[72.0431697785,39.3664744477],[71.9549952316,39.3283223192],[71.9130073522,39.2779621241],[71.8342800782,39.283649767],[71.7933418958,39.2714613953],[71.7513540163,39.3291342835],[71.776546744,39.3672859688],[71.7996400777,39.3843257336],[71.7670994711,39.4581166454],[71.6358873479,39.4451480797],[71.6190921961,39.4646000224],[71.5959988624,39.4483904476],[71.5613588618,39.4605479825],[71.5393152251,39.5399249535],[71.5634582558,39.5820065276],[71.5046752246,39.6103162858],[71.4563891632,39.5998025834],[71.3346243128,39.5674427184],[71.2936861304,39.5172550694],[71.2537976449,39.5496383522],[71.094243703,39.4953878149],[71.0438582477,39.4021724546],[70.944137034,39.4313663321],[70.9063479425,39.377834885],[70.7782849102,39.3932496647],[70.7478436976,39.4994378256],[70.6838121814,39.5302101952],[70.6491721809,39.5860514872],[70.5326558154,39.615976849],[70.3846485404,39.5941406979],[70.2954242966,39.526161978],[70.2366412653,39.5374963914],[70.2093491437,39.57877039],[70.1537152034,39.5528758496],[70.1201248999,39.5900962106],[69.9983600495,39.5407344553],[69.9070364117,39.5722976614],[69.8692473202,39.5269716403],[69.7054945904,39.5998025834],[69.6498606501,39.5771522645],[69.5931770128,39.5917140338],[69.4462194348,39.5294005706],[69.3968836764,39.5617781885],[69.3632933729,39.5196843396],[69.3433491301,39.5423534306],[69.3601442819,39.5965672769],[69.3318024633,39.6927530033],[69.2604230682,39.8267044677],[69.3213054934,39.8694172181],[69.3034606447,39.9217644932],[69.355945494,39.9764849958],[69.3496473121,40.0191044406],[69.3853370096,39.9901582814],[69.4367721619,39.9853327284],[69.428374586,39.9233745445],[69.50710186,39.9265945335],[69.5175988298,40.04643121],[69.5406921635,40.1106862943],[69.6803018627,40.0946282079],[70.0004594435,40.2269940436],[70.1789079311,40.1427910959],[70.1978024769,40.1708703579],[70.2093491437,40.1347663171],[70.3048715694,40.1235300345],[70.4959164209,40.0633040386],[70.5085127847,40.0857946448],[70.6092836954,40.022319923],[70.6638679387,40.0954312022],[70.8003285469,40.121122018],[70.8276206685,40.186910437],[70.8528133962,40.1652554344],[70.8864036998,40.1845046668],[70.9010994576,40.3078906149],[71.0071188532,40.3182960161],[71.0585540055,40.3054891408],[71.2359527961,40.34390248],[71.3115309791,40.3102920036],[71.3682146164,40.3158949119],[71.5078243155,40.2782664674],[71.5193709824,40.2245896956],[71.6201418931,40.2101618159],[71.623290984,40.2670539441],[71.6883721972,40.2638500246],[71.7230121977,40.154024194],[71.7985903807,40.2053518399],[71.8332303813,40.2069552032],[71.8332303813,40.2502316736],[72.0589152333,40.2830712654],[71.9654922015,40.3142941284],[72.0904061429,40.404678887],[72.0841079609,40.4502252134],[72.1911770535,40.4981353888],[72.3181903888,40.4398401699],[72.4200109965,40.4022808576],[72.4168619055,40.4366444491],[72.4368061483,40.4701919409],[72.380122511,40.5204817708],[72.4252594814,40.5436183875],[72.3475819045,40.6042143742],[72.4200109965,40.6153708067],[72.4766946338,40.5499994966],[72.5144837253,40.5603675021],[72.6603916063,40.5101075909],[72.6698388792,40.6002294826],[72.7674606989,40.5763151447],[72.7485661532,40.6153708067],[72.8062994874,40.6743095763],[72.8472376699,40.671921179],[72.985797672,40.7602348901],[73.1443019169,40.7840833483],[73.1443019169,40.8428729421],[73.0151891876,40.8404905934],[72.9417103986,40.801566777],[72.839889791,40.8547834013],[72.5921613022,40.8682793335],[72.5491237258,40.9690148615],[72.4882413006,40.9769402723],[72.4462534212,41.0315996553],[72.3507309954,41.0553504628],[72.1701831138,40.9919959297],[72.2100715993,41.0585165895],[72.1439406891,41.1573812437],[72.0652134152,41.120225597],[71.8668206848,41.196095569],[71.92770311,41.3010619444],[71.7691988651,41.4538683137],[71.6936206821,41.419242679],[71.7450558344,41.5466367604],[71.6169928021,41.4766796547],[71.6768255303,41.4349838938],[71.5697564377,41.2908095095],[71.4521903753,41.286077073],[71.4070534049,41.1131082848],[71.2810897665,41.1044082998],[71.2642946148,41.181876639],[71.1278340066,41.1494775497],[71.0386097627,41.1858266515],[70.9724788526,41.1660742064],[70.8507140022,41.2497836565],[70.7856327891,41.2000447237],[70.7793346072,41.3830234029],[70.7100546061,41.4617351999],[70.4822703601,41.3956237015],[70.3038218725,41.5167766829],[70.2313927804,41.4892617868],[70.1694606582,41.5183486096],[70.2114485377,41.6086701719],[70.4938170269,41.7153222633],[70.5221588456,41.7959779664],[70.5987867256,41.8210154105],[70.6008861195,41.8546440662],[70.6691164236,41.9031007844],[70.7509927885,41.9187241454],[70.8223721836,41.9218483588],[70.8559624872,41.9538627259],[70.8360182444,42.0123839996],[70.864360063,42.052927172],[71.0018703682,42.028760317],[71.1036909759,42.1113573484],[71.2170582504,42.1424981063],[71.2611455238,42.2062888003],[71.1362315825,42.2762289051],[71.0365103688,42.2940900492],[70.9861249134,42.2575857909],[70.8895527907,42.2645776048],[70.8622606691,42.3274690389],[70.9504352159,42.3957243444],[70.9829758225,42.4987421941],[71.0742994603,42.4739714221],[71.092144309,42.4894543041],[71.0018703682,42.5598530371],[71.0029200652,42.5946362815],[71.1645734011,42.6077715688],[71.1845176438,42.6718629099],[71.2716424937,42.7459103087],[71.2684934027,42.7728847816],[71.5340667402,42.8006177022],[71.6432352268,42.7620964016],[71.8363794722,42.8360361301],[72.1145491735,42.7374301919],[72.2772522064,42.7597843615],[72.5449249379,42.6726346922],[72.7338703954,42.6487049834],[72.912318883,42.535106482],[73.1212085832,42.5498009323],[73.3175019196,42.5142189456],[73.3206510106,42.4499653836],[73.4917516193,42.41897625],[73.521143135,42.4460925799],[73.4308691942,42.5490276264],[73.4718073766,42.7328041849],[73.5095964681,42.847581231],[73.5085467711,42.9298736963],[73.5641807114,42.9936324188],[73.5452861656,43.0243359183],[73.6586534401,43.0611598578],[73.8392013218,43.1255485641],[73.8895867771,43.1148218143],[73.9599164752,43.1990527556],[73.9777613239,43.2281237326],[74.047041325,43.170733489],[74.1782534483,43.202113511],[74.2191916307,43.2028786759],[74.1929492061,43.2648251581],[74.347254663,43.2151200086],[74.577138303,43.1362734332],[74.7566364876,42.992096841],[74.877351641,42.9897934023],[75.0463528558,42.9283365263],[75.2006583128,42.8691263137],[75.4242437708,42.8414241123],[75.5921952886,42.8252587562],[75.7141199841,42.7976745319],[75.8253069485,42.9406271588],[75.9360227816,42.9568351521],[76.0278933665,42.9113039921],[76.1932604194,42.9313142539],[76.2031541747,42.9168247134],[76.3091586957,42.9099237345],[76.3082164333,42.8722998177],[76.3986736246,42.8726450955],[76.5079760641,42.9168247134],[76.6507288192,42.9113039921],[76.7166424354,42.9077180216],[76.7716371269,42.9544631989],[76.8224401564,42.9544631989],[76.8392353081,42.9859541459],[77.001938341,42.9851862658],[77.0376280385,42.9444748979],[77.0712183421,42.9805787841],[77.1593928889,42.9721308375],[77.303201376,42.9152690325],[77.83119896,42.9129627165],[78.0505856301,42.8514291185],[78.5061541221,42.8945090812],[79.0572450398,42.7728847816],[79.195805042,42.8029282181],[79.1790098902,42.7158392065],[79.5086147439,42.4639054943],[79.9715311148,42.4406702525],[80.1762220271,42.2086213861],[80.1520789964,42.1222583549],[80.2392038462,42.0583829317],[79.8476668704,42.0170633778],[79.7794365663,41.8937249324],[78.6971989736,41.5340657761],[78.6415650333,41.4664548736],[78.1419092679,41.3719961384],[78.1272135101,41.2253136715],[77.8081056263,41.0600995957],[77.4785007727,40.9959573735],[77.3462389524,41.0395175435],[77.2696110725,40.9999185793],[76.9903916741,41.0624740335],[76.7374147005,40.9103372345],[76.6597371235,40.6950054354],[76.6555383356,40.6169644307],[76.5379722731,40.5228755844],[76.5400716671,40.4646018554],[76.3721201493,40.3782958649],[76.3353807548,40.3351013539],[76.3122874211,40.404678887],[76.2702995417,40.4406390764],[76.169528631,40.3702989692],[76.0677080233,40.3894899245],[76.0456643866,40.3559021653],[75.9879310524,40.3830935468],[75.9637880217,40.3710987014],[75.9249492332,40.2926798369],[75.8220789286,40.3278995786],[75.7297055938,40.2918791748],[75.6698728656,40.3607014415],[75.7213080179,40.4685948211],[75.6499286228,40.5093095106],[75.6215868042,40.5771124271],[75.6320837741,40.6225418154],[75.5869468037,40.6679403267],[75.4231940738,40.5651521939],[75.3234728602,40.5260672028],[75.2877831626,40.4853626847],[75.256292253,40.4837659257],[75.2363480103,40.4486276189],[75.1376764936,40.4558164953],[75.0946389172,40.4342475589],[75.0232595221,40.462205962],[74.9896692186,40.45182277],[74.8343140646,40.519683814],[74.7954752761,40.4462311558],[74.9140910356,40.34390248],[74.8511092164,40.3230979681],[74.8133201249,40.3511025474],[74.6989031534,40.3463025879],[74.6747601227,40.2830712654],[74.6012813337,40.2798681047],[74.3451552691,40.0930221908],[74.2076449639,40.121122018],[73.9305249596,40.0295542041],[73.9809104149,40.0118690514],[73.9074316259,39.9129085342],[73.9179285957,39.8678058987],[73.8381516248,39.8339594494],[73.8434001097,39.762182071],[73.9095310198,39.7395849345],[73.9452207174,39.60142018],[73.9063819289,39.5957584267],[73.8675431404,39.4775649644],[73.6324110155,39.4637896333],[73.3615891931,39.4362307897],[73.3552910112,39.3916272167],[73.2587188884,39.3770234865],[73.2314267668,39.3559238151],[73.1033637345,39.3705319589],[72.9375116107,39.3672859688],[72.7874049417,39.3478068596],[72.6908328189,39.3940608746],[72.6236522118,39.3964944476],[72.5669685746,39.3518654552],[72.5386267559,39.382703078],[72.4766946338,39.3754006612],[72.4536013001,39.3445598133],[72.3381346316,39.3307581838],[72.2625564486,39.1844561777],[72.2373637209,39.1698091888]
                    ]
                ]
            }
        };

        L.geoJSON(KGGeoJSON).addTo(map);

        var geoJSONLayer = L.geoJSON(KGGeoJSON);
        var bounds = geoJSONLayer.getBounds();

        map.fitBounds(bounds.pad(0.1));
        
        fetch('/map/api/locations/')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                data.forEach(location => {
                    L.marker([location.latitude, location.longitude])
                        .addTo(map)
                        .bindPopup(location.name);
                });
            })
            .catch(error => {
                console.error('There was a problem with the fetch operation:', error);
            });
    </script>
</body>
</html>
